{"version":3,"file":"main.js","mappings":"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","sources":["webpack://Express_Webpack_PWA/./src/index.js"],"sourcesContent":["window.addEventListener(\"load\", function () {\r\n  console.log(\"Loaded.\");\r\n\r\n  // Service Worker registreren.\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker\r\n      .register(\"sw.js\")\r\n      .then((registration) => {\r\n        console.log(\"Registerd:\", registration);\r\n      })\r\n      .catch((error) => console.log(error));\r\n  } else {\r\n    console.log(\"No service worker support in this browser.\");\r\n  }\r\n\r\n  // Click events opvangen.\r\n  document\r\n    .querySelector(\"#btnGrantPermission\")\r\n    ?.addEventListener(\"click\", function () {\r\n      console.log(\"clicked\");\r\n\r\n      // Controleer of notifications mogelijk zijn met deze browser...\r\n      if (!(\"Notification\" in window)) {\r\n        console.log(\"Notifications are not supported by your browser.\");\r\n      } else {\r\n        if (Notification.permission == \"granted\") {\r\n          console.log(\"Permission granted before.\");\r\n        } else if (Notification.permission !== \"denied\") {\r\n          Notification.requestPermission().then((permission) => {\r\n            if (permission == \"granted\") {\r\n              console.log(\"Permission granted.\");\r\n            }\r\n          });\r\n        } else {\r\n          console.log(\"Permission denied. No Notifications will be send.\");\r\n        }\r\n      }\r\n    });\r\n\r\n  document\r\n    .querySelector(\"#btnShowNotification\")\r\n    ?.addEventListener(\"click\", function () {\r\n      if (Notification.permission === \"granted\") {\r\n        navigator.serviceWorker.getRegistration().then((registration) => {\r\n          // https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/showNotification\r\n          registration.showNotification(\"MB Testrit!\", {\r\n            vibrate: [\r\n              300, 100, 100, 50, 100, 50, 100, 100, 150, 250, 100, 700, 200,\r\n              150, 200,\r\n            ],\r\n            body: \"Bericht is verstuurd naar één van onze werknemers!\",\r\n            icon: \"/images/icons/brand.png\",\r\n            actions: [\r\n              { action: \"go\", title: \"Ga naar de officiële website..\" },\r\n              { action: \"noGo\", title: \"Scroll verder op huidige website\" },\r\n            ],\r\n          });\r\n            \r\n          console.log(\"New notification was send.\");\r\n          window.location.href = \"/index.html\";\r\n        });\r\n      }\r\n    });\r\n\r\n    \r\n    document.querySelector(\"#btnSubscribeToPushNotification\")\r\n        .addEventListener('click', function(){\r\n            console.log(\"Clicked to subscribe.\"); \r\n\r\n            navigator.serviceWorker.getRegistration()\r\n            .then(registration => {\r\n                // https://developer.mozilla.org/en-US/docs/Web/API/PushManager/subscribe\r\n                // Public key: BGR9dUZ-UlIFfVWIfSfkZ3lFP52RuXUPvXFE5fsL0CAXnawPKoQDLMKguQSTW6DCaCfEwMlVz9HPkXH8IztuMIM\r\n                // Private key: cJdeLej_aarHqCZEApBMu7Ikj2h58vNMtXMGwxrKIn8\r\n                registration.pushManager.subscribe(\r\n                    {\r\n                        userVisibleOnly: true,\r\n                        applicationServerKey: urlB64ToUint8Array(\"BGR9dUZ-UlIFfVWIfSfkZ3lFP52RuXUPvXFE5fsL0CAXnawPKoQDLMKguQSTW6DCaCfEwMlVz9HPkXH8IztuMIM\")\r\n                    }\r\n                )\r\n                .then(subscription => {\r\n                    console.log(\"Subscripton: \", JSON.stringify(subscription));\r\n                    window.location.href = \"/index.html\";\r\n                    // Verzend het 'subscription object' naar de centrale server om op te slaan.\r\n                    var options = {\r\n                        method: \"POST\",\r\n                        headers: { \"Content-type\": \"application/json\"},\r\n                        body: JSON.stringify(subscription)\r\n                    };\r\n                    fetch(\"/dist/api/save-subscription/\", options)\r\n                    .then(response => {\r\n                        console.log(\"Response:\", response);\r\n                        return response.json();\r\n                    })\r\n                    .then(response => {\r\n                        console.log(response);\r\n                    })\r\n                    .catch(error => console.log(error));\r\n                })\r\n                .catch(error => console.log(error));\r\n            })\r\n            .catch(error => console.log(error));\r\n        });\r\n});\r\n// Zie: https://github.com/GoogleChromeLabs/web-push-codelab/blob/master/app/scripts/main.js\r\nfunction urlB64ToUint8Array(base64String) {\r\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n  const base64 = (base64String + padding)\r\n    .replace(/\\-/g, '+')\r\n    .replace(/_/g, '/');\r\n\r\n  const rawData = window.atob(base64);\r\n  const outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (let i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}"],"names":["window","addEventListener","console","log","navigator","serviceWorker","register","then","registration","error","document","querySelector","Notification","permission","requestPermission","getRegistration","showNotification","vibrate","body","icon","actions","action","title","location","href","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlB64ToUint8Array","subscription","JSON","stringify","options","method","headers","fetch","response","json","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt"],"sourceRoot":""}